# Ralph Progress Log
Started: 2026-01-23
Feature: 09-qt-frontend

## Codebase Patterns

### Architecture
- **Clean Architecture hexagonale** : domain/ ‚Üí application/ ‚Üí infrastructure/
- **PySide6 avec QML** : UI d√©clarative, logique en Python
- **APIs Backend** : auth (port 8000), data (port 8001)

### Patterns PySide6/QML
- QQmlApplicationEngine pour charger QML
- QAbstractListModel pour exposer donn√©es Python √† QML
- @Slot decorator pour m√©thodes appelables depuis QML
- Signal/Slot pour communication bidirectionnelle
- QSettings pour persistance locale (JWT, pr√©f√©rences)

### Charte Graphique (OBLIGATOIRE)
- primary: #fc3117
- background: #000
- card: rgb(18,18,18)
- text: rgb(229,229,231)
- textDetail: #AAA
- border: rgb(60,60,67)
- read: #536DFE
- cart: #f38f21

### Conventions
- Nommage: CamelCase pour QML, snake_case pour Python
- Fichiers QML: PascalCase (MangaCard.qml, HomePage.qml)
- Fichiers Python: snake_case (auth_service.py, manga_model.py)
- R√©solution cible: 1280x720 (Raspberry Pi)

## Key Files

### Structure √† cr√©er
- booksync_app_qt/src/booksync_app_qt/main.py
- booksync_app_qt/src/booksync_app_qt/qml/main.qml
- booksync_app_qt/src/booksync_app_qt/qml/theme/Theme.qml
- booksync_app_qt/src/booksync_app_qt/qml/components/Sidebar.qml
- booksync_app_qt/src/booksync_app_qt/qml/components/MangaCard.qml
- booksync_app_qt/src/booksync_app_qt/qml/pages/LoginPage.qml
- booksync_app_qt/src/booksync_app_qt/qml/pages/HomePage.qml
- booksync_app_qt/src/booksync_app_qt/qml/pages/CollectionPage.qml
- booksync_app_qt/src/booksync_app_qt/models/manga_model.py
- booksync_app_qt/src/booksync_app_qt/services/auth_service.py
- booksync_app_qt/src/booksync_app_qt/services/data_service.py

### Fichiers de r√©f√©rence existants
- CLAUDE.md (charte graphique, conventions)
- booksync_api_auth/pyproject.toml (structure pyproject)
- docs/user_stories/US-013.md (interface principale)
- docs/user_stories/US-032.md (page accueil)

---

## 2026-01-23 - QT-001: Cr√©er structure projet booksync_app_qt avec pyproject.toml
- **Impl√©ment√©:**
  - Structure compl√®te booksync_app_qt/src/booksync_app_qt/ avec qml/, models/, services/
  - pyproject.toml bas√© sur booksync_api_auth avec PySide6, aiohttp, pydantic
  - Dockerfile avec toutes les d√©pendances X11/Qt pour conteneurisation
  - docker-compose.yml avec r√©seau booksync et volumes persistants
  - main.py avec QQmlApplicationEngine pr√™t
  - main.qml placeholder avec couleurs de la charte

- **Fichiers cr√©√©s:**
  - booksync_app_qt/pyproject.toml
  - booksync_app_qt/Dockerfile
  - booksync_app_qt/docker-compose.yml
  - booksync_app_qt/README.md
  - booksync_app_qt/src/booksync_app_qt/__init__.py
  - booksync_app_qt/src/booksync_app_qt/main.py
  - booksync_app_qt/src/booksync_app_qt/models/__init__.py
  - booksync_app_qt/src/booksync_app_qt/services/__init__.py
  - booksync_app_qt/src/booksync_app_qt/qml/main.qml

- **Learnings:**
  - setuptools.packages.find avec `where = ["src"]` pour structure src layout
  - PySide6 6.6+ requiert Python 3.11+
  - Pour Qt GUI dans Docker: nombreuses libs X11/XCB n√©cessaires
  - `project.gui-scripts` pour entry point GUI (booksync-gui)
  - Path(__file__).parent pour localiser les fichiers QML relatifs au module

---

## 2026-01-23 - QT-002: Configurer th√®me QML avec couleurs charte graphique
- **Impl√©ment√©:**
  - Theme.qml singleton avec QtObject et toutes les couleurs du mode sombre
  - Couleurs light mode pr√©par√©es pour impl√©mentation future
  - qmldir pour d√©clarer le singleton importable
  - main.py modifi√© avec addImportPath() pour charger le th√®me
  - main.qml utilise maintenant Theme.background et Theme.primary

- **Fichiers cr√©√©s/modifi√©s:**
  - booksync_app_qt/src/booksync_app_qt/qml/theme/Theme.qml (nouveau)
  - booksync_app_qt/src/booksync_app_qt/qml/theme/qmldir (nouveau)
  - booksync_app_qt/src/booksync_app_qt/main.py (modifi√©)
  - booksync_app_qt/src/booksync_app_qt/qml/main.qml (modifi√©)

- **Learnings:**
  - Pour un singleton QML: `pragma Singleton` en haut du fichier + `qmldir` avec `singleton Theme 1.0 Theme.qml`
  - `engine.addImportPath(str(qml_dir))` permet d'ajouter des chemins d'import personnalis√©s
  - QtObject est id√©al pour les singletons de donn√©es (pas de composant visuel)
  - `Qt.rgba()` accepte des valeurs 0-1, utiliser division pour RGB 0-255
  - Test headless possible avec `QT_QPA_PLATFORM=offscreen`

---

## 2026-01-23 - QT-003: Cr√©er main.qml avec ApplicationWindow de base
- **Impl√©ment√©:**
  - main.qml modifi√© pour utiliser ApplicationWindow (QtQuick.Controls) au lieu de Window
  - main.py mis √† jour pour utiliser QApplication au lieu de QGuiApplication
  - Fen√™tre configur√©e avec taille 1280x720 et fond Theme.background (noir)

- **Fichiers modifi√©s:**
  - booksync_app_qt/src/booksync_app_qt/qml/main.qml
  - booksync_app_qt/src/booksync_app_qt/main.py

- **Learnings:**
  - ApplicationWindow vient de QtQuick.Controls, pas de QtQuick.Window
  - Pour Qt Quick Controls, pr√©f√©rer QApplication √† QGuiApplication pour meilleure compatibilit√© styles
  - Test headless possible avec `QT_QPA_PLATFORM=offscreen python3`
  - ApplicationWindow appara√Æt comme `ApplicationWindow_QMLTYPE_X` dans metaObject().className()

---

## 2026-01-23 - QT-004: Impl√©menter Sidebar.qml avec ic√¥nes navigation
- **Impl√©ment√©:**
  - Sidebar.qml avec 5 boutons de navigation (Accueil, Collection, Planning, Recherche, Param√®tres)
  - SidebarButton.qml composant r√©utilisable avec √©tats hover/selected
  - Ic√¥nes Unicode pour chaque bouton (‚åÇ, ‚ò∞, ‚ò∑, ‚åï, ‚öô)
  - Signal navigationRequested(pageName) √©mis au clic
  - qmldir pour le module Components
  - Int√©gration dans main.qml avec affichage de la page courante

- **Fichiers cr√©√©s/modifi√©s:**
  - booksync_app_qt/src/booksync_app_qt/qml/components/Sidebar.qml (nouveau)
  - booksync_app_qt/src/booksync_app_qt/qml/components/SidebarButton.qml (nouveau)
  - booksync_app_qt/src/booksync_app_qt/qml/components/qmldir (nouveau)
  - booksync_app_qt/src/booksync_app_qt/qml/main.qml (modifi√©)

- **Learnings:**
  - Pour importer un module local, utiliser `import "components"` (chemin relatif) plut√¥t que `import Components`
  - Layout.fillHeight ne fonctionne que dans ColumnLayout/RowLayout, pas dans Column/Row
  - Les ic√¥nes Unicode sont une alternative simple aux ic√¥nes externes (pas de fichiers suppl√©mentaires)
  - ToolTip permet d'afficher un label au survol avec un d√©lai configurable
  - Behavior on color avec ColorAnimation pour des transitions fluides

---

## 2026-01-23 - QT-005: Ajouter StackView pour navigation entre pages
- **Impl√©ment√©:**
  - StackView ajout√© dans main.qml pour navigation entre pages
  - 5 pages placeholder cr√©√©es: HomePage, CollectionPage, PlanningPage, SearchPage, SettingsPage
  - Transitions anim√©es avec opacity et translation pour push/pop/replace
  - Navigation connect√©e via signal navigationRequested de Sidebar
  - √âtat de navigation m√©moris√© via currentPageName property
  - qmldir pour le module Pages

- **Fichiers cr√©√©s/modifi√©s:**
  - booksync_app_qt/src/booksync_app_qt/qml/pages/HomePage.qml (nouveau)
  - booksync_app_qt/src/booksync_app_qt/qml/pages/CollectionPage.qml (nouveau)
  - booksync_app_qt/src/booksync_app_qt/qml/pages/PlanningPage.qml (nouveau)
  - booksync_app_qt/src/booksync_app_qt/qml/pages/SearchPage.qml (nouveau)
  - booksync_app_qt/src/booksync_app_qt/qml/pages/SettingsPage.qml (nouveau)
  - booksync_app_qt/src/booksync_app_qt/qml/pages/qmldir (nouveau)
  - booksync_app_qt/src/booksync_app_qt/qml/main.qml (modifi√©)

- **Learnings:**
  - StackView.replace() est pr√©f√©rable √† push() pour navigation principale (√©vite d'empiler les pages)
  - Pour charger dynamiquement un fichier QML: `stackView.replace("pages/PageName.qml")`
  - Les transitions se d√©finissent via pushEnter/pushExit, popEnter/popExit, replaceEnter/replaceExit
  - PropertyAnimation avec Easing.InOutQuad donne des transitions fluides
  - Pages placeholder doivent √™tre des `Item` avec Rectangle comme contenu pour bien fonctionner dans StackView
  - Import relatif des pages: `import "pages"` dans main.qml
  - initialItem du StackView peut √™tre un composant inline: `initialItem: HomePage {}`

---

## 2026-01-23 - QT-007: Cr√©er LoginPage.qml
- **Impl√©ment√©:**
  - LoginPage.qml avec formulaire de connexion centr√© et responsive
  - TextField pour username avec placeholder et focus styling
  - TextField pour password avec echoMode: Password
  - Bouton "Se connecter" avec couleur Theme.primary et √©tats hover/pressed
  - Message d'erreur affich√© en Theme.primary (rouge)
  - Signal loginRequested(username, password) √©mis apr√®s validation
  - Validation basique (champs non vides)
  - Propri√©t√©s isLoading et errorMessage pour gestion externe
  - BusyIndicator overlay pendant le chargement
  - M√©thode reset() pour r√©initialiser le formulaire

- **Fichiers cr√©√©s/modifi√©s:**
  - booksync_app_qt/src/booksync_app_qt/qml/pages/LoginPage.qml (nouveau)
  - booksync_app_qt/src/booksync_app_qt/qml/pages/qmldir (modifi√©)

- **Learnings:**
  - ColumnLayout avec Layout.fillWidth pour formulaires responsive
  - TextField background customis√© avec Rectangle (radius, border dynamique)
  - activeFocus property pour d√©tecter le focus et changer la bordure
  - echoMode: TextInput.Password pour masquer le mot de passe
  - onAccepted: sur TextField permet de g√©rer la touche Entr√©e
  - BusyIndicator avec Rectangle overlay semi-transparent pour √©tat loading
  - forceActiveFocus() pour d√©placer le focus programmatiquement
  - Component.onCompleted pour initialiser le focus au chargement
  - Qt.darker() et Qt.lighter() pour variations de couleur sur les √©tats

---

## 2026-01-23 - QT-006: Cr√©er mod√®les Python QAbstractListModel de base
- **Impl√©ment√©:**
  - BaseListModel classe de base avec m√©thodes rowCount, data, roleNames, set_items, append_item, clear
  - MangaModel h√©ritant de BaseListModel avec r√¥les: id, title, coverUrl, author
  - Mod√®le expos√© √† QML via engine.rootContext().setContextProperty("mangaModel", manga_model)
  - Donn√©es de test ajout√©es (One Piece, Naruto, Dragon Ball)

- **Fichiers cr√©√©s/modifi√©s:**
  - booksync_app_qt/src/booksync_app_qt/models/base_model.py (nouveau)
  - booksync_app_qt/src/booksync_app_qt/models/manga_model.py (nouveau)
  - booksync_app_qt/src/booksync_app_qt/models/__init__.py (modifi√©)
  - booksync_app_qt/src/booksync_app_qt/main.py (modifi√©)

- **Learnings:**
  - Les r√¥les personnalis√©s commencent √† `Qt.UserRole + 1` pour √©viter les conflits avec les r√¥les standard
  - `roleNames()` retourne un dict[int, bytes] o√π les valeurs sont des bytes (b"roleName")
  - Le mod√®le doit √™tre cr√©√© AVANT d'appeler `engine.load()` pour √™tre disponible en QML
  - `engine.rootContext().setContextProperty("name", object)` expose un objet Python au contexte QML
  - `beginResetModel()`/`endResetModel()` et `beginInsertRows()`/`endInsertRows()` sont essentiels pour notifier QML des changements
  - Convention: snake_case pour les cl√©s dict Python (cover_url), camelCase pour les r√¥les QML (coverUrl)

---

## 2026-01-23 - QT-008: Impl√©menter auth_service.py pour appel API
- **Impl√©ment√©:**
  - AuthService classe QObject avec @Slot pour login() et logout()
  - AuthWorker (QThread) pour ex√©cuter les appels HTTP async sans bloquer l'UI
  - Appel HTTP POST vers /api/v1/auth/login avec aiohttp
  - Signaux Qt pour communiquer r√©sultats: loginSucceeded, loginFailed, logoutSucceeded, logoutFailed
  - Gestion compl√®te des erreurs: 401, 403, 429, 500, timeout, network errors
  - AuthError enum pour typer les erreurs
  - TokenData dataclass pour stocker les tokens
  - M√©thodes getAccessToken(), getRefreshToken(), isLoggedIn() expos√©es √† QML

- **Fichiers cr√©√©s/modifi√©s:**
  - booksync_app_qt/src/booksync_app_qt/services/auth_service.py (nouveau)
  - booksync_app_qt/src/booksync_app_qt/services/__init__.py (modifi√©)

- **Learnings:**
  - Pour les appels HTTP async avec Qt, utiliser QThread + asyncio.run() √©vite de bloquer l'UI
  - Les signaux Qt doivent avoir des types simples (str, int, bool) pour √™tre compatibles QML
  - aiohttp.ClientTimeout pour g√©rer les timeouts de mani√®re propre
  - aiohttp.ClientConnectorError pour d√©tecter les erreurs de connexion serveur
  - @Slot decorator n√©cessaire pour exposer les m√©thodes Python √† QML
  - Signal avec plusieurs arguments: Signal(str, str, str, int) puis emit(v1, v2, v3, v4)
  - QThread.finished signal pour nettoyer apr√®s la fin du thread worker
  - Les messages d'erreur en fran√ßais pour une meilleure UX

---

## 2026-01-23 - QT-009: Binding QML ‚Üî Python pour authentification
- **Impl√©ment√©:**
  - AuthService expos√© comme context property via engine.rootContext().setContextProperty()
  - LoginPage connect√© √† authService.login() via onLoginRequested handler
  - Connections QML pour √©couter les signaux AuthService (loginSucceeded, loginFailed, loadingChanged)
  - Navigation automatique vers HomePage apr√®s login r√©ussi (isAuthenticated = true)
  - √âtat isLoading synchronis√© avec loadingChanged pour afficher le spinner
  - Sidebar et StackView cach√©s quand non authentifi√©
  - Fonction logout() ajout√©e dans main.qml pour d√©connexion

- **Fichiers cr√©√©s/modifi√©s:**
  - booksync_app_qt/src/booksync_app_qt/main.py (modifi√© - import et exposition AuthService)
  - booksync_app_qt/src/booksync_app_qt/qml/main.qml (modifi√© - binding complet)

- **Learnings:**
  - Pour connecter signaux Python vers QML: utiliser `Connections { target: monService }` avec `function onSignalName(args) {}`
  - Les noms de handlers QML suivent la convention `on<SignalName>` (camelCase avec pr√©fixe on)
  - `visible: property` sur composants QML permet de montrer/cacher dynamiquement sans destroy/recreate
  - Pour passer plusieurs param√®tres d'un Signal Python vers QML: d√©clarer Signal(type1, type2, ...) puis dans QML `function onSignal(arg1, arg2, ...)`
  - loginPage.reset() doit √™tre appel√© apr√®s login r√©ussi pour nettoyer les champs
  - M√™me si logout √©choue c√¥t√© serveur, faire le logout local pour meilleure UX

---

## 2026-01-23 - QT-010: Stocker JWT dans QSettings et g√©rer session
- **Impl√©ment√©:**
  - QSettings pour persistance des tokens (access_token, refresh_token, expires_at)
  - M√©thodes _save_tokens(), _load_tokens(), _clear_tokens() dans AuthService
  - M√©thode tryAutoLogin() appelable depuis QML pour restaurer la session
  - V√©rification de l'expiration du token via d√©codage JWT base64
  - Signaux autoLoginSucceeded et autoLoginFailed pour notifier QML
  - √âcran de chargement au d√©marrage pendant la v√©rification de session
  - Auto-login au Component.onCompleted de main.qml

- **Fichiers modifi√©s:**
  - booksync_app_qt/src/booksync_app_qt/services/auth_service.py
  - booksync_app_qt/src/booksync_app_qt/qml/main.qml

- **Learnings:**
  - QSettings stocke par d√©faut dans ~/Library/Preferences (macOS) ou ~/.config (Linux)
  - QSettings.sync() force l'√©criture imm√©diate sur disque
  - JWT est encod√© en base64url, n√©cessite padding avant d√©codage: `payload += "=" * (4 - len(payload) % 4)`
  - Pour √©viter le "flash" de la page login au d√©marrage: utiliser une property isCheckingSession
  - Signal sans arguments: `Signal()` puis `emit()` sans param√®tres
  - @Slot() sans param√®tres pour m√©thode appelable depuis QML: `@Slot()` puis `def tryAutoLogin(self):`
  - Toujours effacer les tokens localement m√™me si logout serveur √©choue (meilleure UX)
  - Utiliser un buffer de 60 secondes avant expiration pour √©viter les edge cases

---

## 2026-01-23 - QT-012: Impl√©menter HomePage.qml avec GridView
- **Impl√©ment√©:**
  - HomePage.qml avec GridView affichant les MangaCard
  - Titre "Nouveaut√©s" en haut avec couleur Theme.text
  - ScrollView pour d√©filer le contenu
  - Donn√©es connect√©es au mangaModel (context property Python)
  - Espacement coh√©rent 20px (gridCellWidth = cardWidth + spacing)
  - √âtat vide affich√© si aucune donn√©e
  - Badge "NOUVEAU" sur les 3 premiers √©l√©ments

- **Fichiers modifi√©s:**
  - booksync_app_qt/src/booksync_app_qt/qml/pages/HomePage.qml

- **Learnings:**
  - √âviter de nommer des propri√©t√©s `cellWidth`/`cellHeight` car ce sont des propri√©t√©s r√©serv√©es de GridView (FINAL)
  - Utiliser un pr√©fixe unique comme `gridCellWidth` pour √©viter les conflits
  - GridView avec delegate Item permet de centrer le MangaCard dans la cellule
  - ScrollView + GridView avec anchors.fill pour un layout responsive
  - `model.roleName` dans le delegate pour acc√©der aux donn√©es du mod√®le Python
  - Les warnings de style Qt Controls natif ne sont pas bloquants en mode offscreen

---

## 2026-01-23 - QT-011: Cr√©er MangaCard.qml composant r√©utilisable
- **Impl√©ment√©:**
  - MangaCard.qml avec couverture 230x320px, titre et auteur
  - Badge optionnel avec couleurs conditionnelles (NOUVEAU=primary, EN COLLECTION=read)
  - Effet hover avec Theme.stateHovered et scale animation (1.02x)
  - Signal clicked() pour interaction
  - Placeholder avec emoji et BusyIndicator pendant chargement image
  - Image asynchrone pour ne pas bloquer l'UI

- **Fichiers cr√©√©s/modifi√©s:**
  - booksync_app_qt/src/booksync_app_qt/qml/components/MangaCard.qml (nouveau)
  - booksync_app_qt/src/booksync_app_qt/qml/components/qmldir (modifi√©)

- **Learnings:**
  - Image.asynchronous: true permet le chargement non-bloquant des images
  - Image.status peut √™tre Loading, Ready, Error pour g√©rer les √©tats
  - Transform Scale avec Behavior NumberAnimation pour effet zoom fluide au hover
  - ColumnLayout.spacing + Layout.margins pour espacement coh√©rent
  - Text.elide: Text.ElideRight pour tronquer le texte trop long avec "..."
  - maximumLineCount + wrapMode pour limiter les lignes de texte
  - Rectangle avec clip: true pour masquer les d√©bordements (corners radius sur image)
  - BusyIndicator.running contr√¥le √† la fois l'animation et l'affichage (si visible)

---

## 2026-01-23 - QT-013: Connecter API Data avec data_service.py
- **Impl√©ment√©:**
  - DataService classe avec DataWorker (QThread) pour appels HTTP async
  - M√©thode getBooks() appelle GET http://localhost:8001/books
  - Headers Authorization Bearer avec JWT r√©cup√©r√© depuis AuthService
  - Signaux booksReceived, booksLoadFailed, loadingChanged pour communication QML
  - DataService re√ßoit r√©f√©rence √† AuthService et MangaModel pour injection de d√©pendances
  - Transformation des donn√©es API vers format attendu par MangaModel
  - main.qml appelle dataService.getBooks() apr√®s login/auto-login r√©ussi

- **Fichiers cr√©√©s/modifi√©s:**
  - booksync_app_qt/src/booksync_app_qt/services/data_service.py (nouveau)
  - booksync_app_qt/src/booksync_app_qt/services/__init__.py (modifi√©)
  - booksync_app_qt/src/booksync_app_qt/main.py (modifi√©)
  - booksync_app_qt/src/booksync_app_qt/qml/main.qml (modifi√©)

- **Learnings:**
  - Injection de d√©pendances Python: passer les objets services/mod√®les au constructeur plut√¥t que via QML
  - set_manga_model() permet de d√©finir le mod√®le √† mettre √† jour sans le passer au constructeur
  - G√©rer les deux formats de r√©ponse API: liste directe ou objet avec cl√© "items"/"books"
  - Transformation de donn√©es: mapper les noms de champs API (titre, couverture_url) vers les noms attendus par le mod√®le (title, cover_url)
  - Connections QML: target: dataService avec function onSignalName(args) pour √©couter les signaux Python
  - Appeler le service de donn√©es apr√®s login plut√¥t qu'au d√©marrage pour avoir le token disponible

---

## 2026-01-23 - QT-014: Ajouter chargement asynchrone des images
- **Impl√©ment√©:**
  - CachedImageProvider h√©ritant de QQuickAsyncImageProvider pour chargement async
  - CachedImageResponse + ImageLoader (QRunnable) pour t√©l√©chargement non-bloquant
  - Cache disque dans ~/.cache/booksync/images/ avec hash MD5 des URLs
  - MangaCard.qml utilise "image://cache/" + Qt.btoa(url) pour acc√©der au provider
  - Gestion des erreurs avec ic√¥ne ‚ö†Ô∏è et message "Image non disponible"
  - BusyIndicator pendant le chargement

- **Fichiers cr√©√©s/modifi√©s:**
  - booksync_app_qt/src/booksync_app_qt/services/image_provider.py (nouveau)
  - booksync_app_qt/src/booksync_app_qt/services/__init__.py (modifi√©)
  - booksync_app_qt/src/booksync_app_qt/main.py (modifi√©)
  - booksync_app_qt/src/booksync_app_qt/qml/components/MangaCard.qml (modifi√©)

- **Learnings:**
  - QQuickAsyncImageProvider permet de cr√©er des ImageProviders avec chargement async
  - QQuickImageResponse.textureFactory() retourne QQuickTextureFactory.textureFactoryForImage(image)
  - QRunnable + QThreadPool.globalInstance().start() pour ex√©cuter du code hors du thread UI
  - Qt.btoa() encode en base64 c√¥t√© QML (utile pour passer des URLs complexes)
  - Image { cache: true } cache les images d√©j√† charg√©es c√¥t√© QML
  - engine.addImageProvider("cache", provider) enregistre le provider avec pr√©fixe "image://cache/"
  - Le hash MD5 de l'URL donne un nom de fichier unique pour le cache disque
  - aiohttp dans asyncio.run() fonctionne bien dans un QRunnable

---

## 2026-01-23 - QT-015: Cr√©er CollectionPage.qml avec TabBar
- **Impl√©ment√©:**
  - CollectionPage.qml avec TabBar et SwipeView synchronis√©s
  - 3 onglets: Collection, Pile √† lire, Envies
  - TabButton personnalis√©s avec indicateur color√© (Theme.primary) quand actif
  - SwipeView avec 3 Item placeholder pour chaque onglet
  - Synchronisation bidirectionnelle TabBar ‚Üî SwipeView via Binding
  - √âtats vides avec emojis et messages explicatifs pour chaque onglet
  - Animation ColorAnimation sur l'indicateur d'onglet actif

- **Fichiers modifi√©s:**
  - booksync_app_qt/src/booksync_app_qt/qml/pages/CollectionPage.qml

- **Learnings:**
  - TabBar + SwipeView: synchronisation via `currentIndex: tabBar.currentIndex` sur SwipeView et `onCurrentIndexChanged` pour sync inverse
  - Binding QML pour synchronisation bidirectionnelle propre: `Binding { target: swipeView; property: "currentIndex"; value: tabBar.currentIndex }`
  - TabButton personnalis√©: `contentItem` pour le texte, `background` pour le fond et l'indicateur
  - Pour un indicateur d'onglet actif: Rectangle imbriqu√© dans le background avec ancrage bottom
  - ColumnLayout avec Layout.fillHeight pour que SwipeView prenne tout l'espace restant
  - clip: true sur SwipeView pour √©viter le d√©bordement pendant les transitions
  - Les √©tats vides avec emoji + texte centr√© am√©liorent l'UX

---

## 2026-01-23 - QT-016: Impl√©menter onglet Collection (s√©ries poss√©d√©es)
- **Impl√©ment√©:**
  - CollectionModel h√©ritant de BaseListModel avec r√¥les: id, title, coverUrl, author, ownedVolumes, totalVolumes
  - SeriesItem.qml composant horizontal avec couverture thumbnail (60x84px), titre, auteur, et badge volume
  - ListView dans CollectionPage.qml avec delegate SeriesItem
  - DataService.getCollection() m√©thode pour r√©cup√©rer les livres de la collection
  - Signaux collectionReceived, collectionLoadFailed, collectionLoadingChanged
  - Connexions QML pour √©couter les signaux et mettre √† jour l'UI
  - √âtat vide, √©tat loading, et liste des s√©ries
  - Bouton refresh avec animation de rotation pendant le chargement

- **Fichiers cr√©√©s:**
  - booksync_app_qt/src/booksync_app_qt/models/collection_model.py
  - booksync_app_qt/src/booksync_app_qt/qml/components/SeriesItem.qml

- **Fichiers modifi√©s:**
  - booksync_app_qt/src/booksync_app_qt/models/__init__.py
  - booksync_app_qt/src/booksync_app_qt/services/data_service.py
  - booksync_app_qt/src/booksync_app_qt/main.py
  - booksync_app_qt/src/booksync_app_qt/qml/components/qmldir
  - booksync_app_qt/src/booksync_app_qt/qml/pages/CollectionPage.qml

- **Learnings:**
  - Pour importer des composants depuis un r√©pertoire parent en QML: `import "../components" as Components`
  - Un mod√®le peut avoir plusieurs workers ind√©pendants (getBooks vs getCollection) avec signaux s√©par√©s
  - RowLayout avec Layout.preferredWidth/Height pour les proportions fixes dans un layout horizontal
  - RotationAnimation avec `loops: Animation.Infinite` pour une animation continue pendant le loading
  - collectionModel.rowCount() pour v√©rifier le nombre d'√©l√©ments et afficher/cacher la liste
  - Les composants delegate ListView ont acc√®s aux r√¥les du mod√®le via `model.roleName`
  - ScrollBar.vertical: ScrollBar { policy: ScrollBar.AsNeeded } pour afficher la scrollbar uniquement si n√©cessaire

---

## 2026-01-23 - QT-017: Impl√©menter onglet Pile √† lire (progressions)
- **Impl√©ment√©:**
  - ReadingProgressModel avec r√¥les: id, title, coverUrl, seriesTitle, readPages, totalPages, progressPercent
  - ReadingItem.qml composant horizontal avec couverture, titre, s√©rie et ProgressBar custom
  - DataService.getReadingProgress() m√©thode avec filtrage par statut 'en_cours'
  - Signaux readingProgressReceived, readingProgressLoadFailed, readingProgressLoadingChanged
  - Int√©gration dans l'onglet "Pile √† lire" de CollectionPage avec lazy loading
  - √âtats: loading, empty, liste avec refresh button anim√©
  - ProgressBar custom avec Rectangle (pas ProgressBar native) pour Theme.read

- **Fichiers cr√©√©s:**
  - booksync_app_qt/src/booksync_app_qt/models/reading_progress_model.py
  - booksync_app_qt/src/booksync_app_qt/qml/components/ReadingItem.qml

- **Fichiers modifi√©s:**
  - booksync_app_qt/src/booksync_app_qt/models/__init__.py
  - booksync_app_qt/src/booksync_app_qt/services/data_service.py
  - booksync_app_qt/src/booksync_app_qt/main.py
  - booksync_app_qt/src/booksync_app_qt/qml/components/qmldir
  - booksync_app_qt/src/booksync_app_qt/qml/pages/CollectionPage.qml

- **Learnings:**
  - Pour une ProgressBar custom, pr√©f√©rer 2 Rectangle imbriqu√©s plut√¥t que ProgressBar native (plus de contr√¥le sur le style)
  - `progressPercent` calcul√© directement dans le mod√®le Python √©vite la duplication de logique en QML
  - Lazy loading d'onglet: `property bool isActive: swipeView.currentIndex === N` + `onIsActiveChanged` pour charger les donn√©es uniquement quand l'onglet devient visible
  - Chaque worker peut avoir ses propres signaux pour √©viter les conflits (readingProgressReceived vs collectionReceived)
  - Le filtrage des donn√©es par statut peut se faire c√¥t√© client (dans `_on_reading_progress_received`) en attendant un endpoint API d√©di√©
  - Behavior on width avec NumberAnimation pour animer la progression de la barre

---

## 2026-01-23 - QT-018: Impl√©menter onglet Envies (wishlist)
- **Impl√©ment√©:**
  - WishlistModel avec r√¥les: id, title, coverUrl, seriesTitle, estimatedPrice
  - WishlistItem.qml composant horizontal avec couverture, titre, s√©rie et badge prix
  - DataService.getWishlist() m√©thode avec signaux wishlistReceived/Failed/LoadingChanged
  - Int√©gration dans l'onglet "Envies" de CollectionPage avec lazy loading
  - Bouton "add to cart" avec ic√¥ne üõí et hover animation
  - √âtats: loading, empty (avec emoji üíù), et liste avec refresh button anim√©

- **Fichiers cr√©√©s:**
  - booksync_app_qt/src/booksync_app_qt/models/wishlist_model.py
  - booksync_app_qt/src/booksync_app_qt/qml/components/WishlistItem.qml

- **Fichiers modifi√©s:**
  - booksync_app_qt/src/booksync_app_qt/models/__init__.py
  - booksync_app_qt/src/booksync_app_qt/services/data_service.py
  - booksync_app_qt/src/booksync_app_qt/main.py
  - booksync_app_qt/src/booksync_app_qt/qml/components/qmldir
  - booksync_app_qt/src/booksync_app_qt/qml/pages/CollectionPage.qml

- **Learnings:**
  - Pattern r√©p√©t√© pour chaque onglet: Model + Worker + Item.qml + lazy loading = architecture scalable
  - Pour le prix: `estimatedPrice.toFixed(2) + " ‚Ç¨"` formate correctement en QML avec le symbole unicode \u20AC
  - Un composant peut avoir plusieurs MouseArea si elles n'overlappent pas (clic sur l'item vs clic sur le bouton cart)
  - Badge prix avec Rectangle + radius: 4 donne un rendu de "pill" √©l√©gant
  - Couleur Theme.cart (#f38f21) utilis√©e pour les √©l√©ments li√©s aux achats/wishlist
  - Le pattern `isActive: swipeView.currentIndex === N` + `onIsActiveChanged` est r√©utilisable pour tous les onglets avec lazy loading

---

