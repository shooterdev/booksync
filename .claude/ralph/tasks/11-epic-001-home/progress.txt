# Ralph Progress Log
Started: 2026-01-23
Feature: 11-epic-001-home

## Codebase Patterns
- **QML Components**: Les composants QML sont dans `qml/components/`, les pages dans `qml/pages/`
- **Theme Singleton**: Utiliser `Theme.primary`, `Theme.text`, etc. pour les couleurs
- **Image Provider**: Les images sont chargées via `image://cache/` + `Qt.btoa(url)`
- **Model Pattern**: Les modèles Python héritent de `BaseListModel`, exposent des rôles via `_roles` property
- **DataService Transform**: Les données API sont transformées dans `_on_*_received` avant d'être injectées dans le modèle

---

## 2026-01-23 - US-001-01: Afficher la grille de nouveautés manga
- **Implémenté**: Grille de nouveautés avec toutes les propriétés requises
- **Fichiers modifiés**:
  - `models/manga_model.py`: Ajout des rôles volumeNumber, isInCollection, isLastVolume, publisherLogo
  - `qml/components/MangaCard.qml`: Checkmark collection, badge DERNIER TOME, logo éditeur
  - `qml/pages/HomePage.qml`: Utilisation des nouvelles propriétés
  - `services/data_service.py`: Transformation des données avec nouveaux champs
- **Learnings**:
  - Le MangaCard utilise des positions absolues pour les badges/checkmarks
  - Les badges utilisent `Theme.primary` comme couleur de fond
  - Le checkmark est un cercle avec un caractère "✓" centré
  - Le logo éditeur utilise le même image provider que la couverture

---

## 2026-01-23 - US-001-03: Naviguer via la sidebar
- **Implémenté**: Sidebar avec 6 items de menu + logo cliquable + responsive
- **Fichiers modifiés**:
  - `qml/components/Sidebar.qml`: Logo BS cliquable, 6 boutons (Nouveautés, Collection, Planning, Recherche, Panier, Compte), responsive < 768px
  - `qml/components/SidebarButton.qml`: Police Lato 14px pour tooltips
  - `qml/main.qml`: Nouvelles routes (cart, account), windowWidth pour responsive, StackView ajusté
  - `qml/pages/CartPage.qml`: Nouvelle page placeholder pour panier
  - `qml/pages/AccountPage.qml`: Nouvelle page compte avec bouton déconnexion
- **Learnings**:
  - La sidebar utilise `windowWidth` property passée depuis main.qml pour le responsive
  - Le StackView ajuste son anchor gauche selon `sidebar.visible`
  - Les icônes outline sont des caractères Unicode simples (⌂, ☰, ⌚, ⌕, ⊞, ⚇)
  - Le logo "BS" utilise `Theme.primary` avec un hover effect
  - AccountPage appelle `authService.logout()` directement (context property)

---

## 2026-01-23 - US-001-02: Filtrer la grille par éditeur
- **Implémenté**: Filtre par éditeur avec dropdown et transitions fluides
- **Fichiers modifiés**:
  - `models/manga_model.py`: Ajout du rôle `publisherName`
  - `models/publisher_filter_model.py`: Nouveau QSortFilterProxyModel pour filtrer par éditeur
  - `models/__init__.py`: Export du PublisherFilterModel
  - `services/data_service.py`: Transformation des données avec `publisher_name`
  - `main.py`: Création et exposition du publisherFilterModel à QML
  - `qml/pages/HomePage.qml`: Bouton Éditeurs, Popup dropdown, filtrage
- **Learnings**:
  - Pour filtrer un modèle dans QML, utiliser `QSortFilterProxyModel` côté Python
  - Le proxy model doit trouver le role ID via `roleNames()` après `setSourceModel()`
  - `setDynamicSortFilter(True)` permet le filtrage automatique quand le filtre change
  - Le Popup QML supporte des transitions `enter` et `exit` pour les animations
  - Les transitions GridView (`add`, `remove`, `displaced`) donnent un filtrage fluide
  - `getPublishers()` retourne une liste triée par count desc pour le dropdown
  - L'item "Tous" dans le dropdown utilise `index === 0` pour distinguer du reste

---

